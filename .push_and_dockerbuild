#!/usr/bin/env bash

if [ -z "$1" ]; then
    echo "‚ùå Error: Por favor agregue un mensaje para el commit."
    echo "Uso: $0 \"tu_commit\""
    exit 1
fi

COMMIT_MSG="$1"

DOCKER_BUILDKIT=1 docker build --network=host -t iama ./model/

git add .

if ! git diff --cached --quiet; then

    git commit -m "$COMMIT_MSG"
    echo "Commit: $COMMIT_MSG"
    git push origin main
    echo "Push"
else

    echo "Nothing to commit."
fi
